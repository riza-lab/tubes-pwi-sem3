(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{577:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return t(486)}])},7508:function(e,n,t){"use strict";var s=t(5893),i=t(5379),r=t.n(i),a=t(1664),l=t.n(a),d=t(7294),o=t(4750),c=t(1163);n.Z=()=>{let[e,n]=(0,d.useState)(null),[t,i]=(0,d.useState)(!1),a=(0,c.useRouter)();(0,d.useEffect)(()=>{let getSession=async()=>{var e;let{data:{session:t}}=await (0,o.N)().auth.getSession();n(null!==(e=null==t?void 0:t.user)&&void 0!==e?e:null)};getSession();let{data:{subscription:e}}=(0,o.N)().auth.onAuthStateChange((e,t)=>{var s;n(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null)});return()=>e.unsubscribe()},[]);let handleLogout=async()=>{await (0,o.N)().auth.signOut(),a.push("/")};return(0,s.jsxs)("header",{className:"jsx-411ff4dbbd43a9a7 navbar",children:[(0,s.jsxs)("div",{className:"jsx-411ff4dbbd43a9a7 container",children:[(0,s.jsx)(l(),{href:"/",className:"logo",children:"GO-RENT"}),(0,s.jsxs)("nav",{className:"jsx-411ff4dbbd43a9a7 nav-links",children:[(0,s.jsx)(l(),{href:"/browse",children:"Browse Cars"}),e&&(0,s.jsx)(l(),{href:"/bookings",children:"My Bookings"}),(null==e?void 0:e.email)==="admin@gorent.com"&&(0,s.jsx)(l(),{href:"/admin",children:"Admin"})]}),(0,s.jsx)("div",{className:"jsx-411ff4dbbd43a9a7 auth-buttons",children:e?(0,s.jsxs)("div",{className:"jsx-411ff4dbbd43a9a7 user-menu",children:[(0,s.jsx)("button",{onClick:()=>i(!t),className:"jsx-411ff4dbbd43a9a7 btn btn-outline user-btn",children:e.email}),t&&(0,s.jsx)("div",{className:"jsx-411ff4dbbd43a9a7 dropdown",children:(0,s.jsx)("button",{onClick:handleLogout,className:"jsx-411ff4dbbd43a9a7 logout-btn",children:"Logout"})})]}):(0,s.jsx)(l(),{href:"/login",className:"btn btn-outline",children:"Login / Sign in"})})]}),(0,s.jsx)(r(),{id:"411ff4dbbd43a9a7",children:".user-menu.jsx-411ff4dbbd43a9a7{position:relative}.user-btn.jsx-411ff4dbbd43a9a7{cursor:pointer}.dropdown.jsx-411ff4dbbd43a9a7{position:absolute;top:100%;right:0;background:white;border:1px solid#e5e7eb;-webkit-border-radius:.375rem;-moz-border-radius:.375rem;border-radius:.375rem;-webkit-box-shadow:0 10px 15px -3px rgba(0,0,0,.1);-moz-box-shadow:0 10px 15px -3px rgba(0,0,0,.1);box-shadow:0 10px 15px -3px rgba(0,0,0,.1);z-index:10;min-width:120px}.logout-btn.jsx-411ff4dbbd43a9a7{width:100%;padding:.5rem 1rem;background:none;border:none;text-align:left;cursor:pointer;color:#374151}.logout-btn.jsx-411ff4dbbd43a9a7:hover{background:#f9fafb}"})]})}},486:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return Admin}});var s=t(5893),i=t(9008),r=t.n(i),a=t(7294),l=t(4750),d=t(7508),o=t(1163);function Admin(){let[e,n]=(0,a.useState)([]),[t,i]=(0,a.useState)("All"),[c,u]=(0,a.useState)(!0),[h,f]=(0,a.useState)(0),[m,x]=(0,a.useState)(0),[b,g]=(0,a.useState)(0),[j,p]=(0,a.useState)(0),[v,N]=(0,a.useState)(!1);(0,o.useRouter)(),(0,a.useEffect)(()=>{N(!0)},[]),(0,a.useEffect)(()=>{if(!v)return;let fetchBookings=async()=>{let{data:e,error:t}=await (0,l.N)().from("bookings").select("\n          *,\n          profiles:user_id (\n            email,\n            full_name\n          )\n        ").order("created_at",{ascending:!1});if(t){console.error("Error fetching bookings:",t),u(!1);return}let s=e||[];n(s);let i=s.length,r=s.filter(e=>"Pending"===e.status).length,a=s.filter(e=>"Confirmed"===e.status).length,d=s.reduce((e,n)=>e+parseFloat(n.total.replace("$","")),0);f(i),x(r),g(a),p(d),u(!1)};fetchBookings()},[]);let updateBookingStatus=async(t,s)=>{let{error:i}=await (0,l.N)().from("bookings").update({status:s}).eq("id",t);if(i){console.error("Error updating booking:",i);return}let r=e.map(e=>e.id===t?{...e,status:s}:e);n(r),"Confirmed"===s?(x(e=>e-1),g(e=>e+1)):"Cancelled"===s&&x(e=>e-1)},getStatusColor=e=>{switch(e){case"Pending":return"#fef3c7";case"Confirmed":return"#cffafe";case"Completed":case"Cancelled":return"#f3f4f6";default:return"#fce7f3"}},k="All"===t?e:e.filter(e=>e.status===t);return v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r(),{children:(0,s.jsx)("title",{children:"Admin - GO-RENT"})}),(0,s.jsx)(d.Z,{}),(0,s.jsx)("main",{children:(0,s.jsxs)("div",{className:"container",style:{padding:"2rem 0"},children:[(0,s.jsx)("h1",{style:{fontSize:"2.25rem",fontWeight:"bold",marginBottom:"2rem"},children:"Admin Dashboard"}),(0,s.jsxs)("div",{className:"stats-grid",style:{marginBottom:"2rem"},children:[(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Total Orders"}),(0,s.jsx)("p",{children:h})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Pending"}),(0,s.jsx)("p",{children:m})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Confirmed"}),(0,s.jsx)("p",{children:b})]}),(0,s.jsxs)("div",{className:"stat-card",children:[(0,s.jsx)("h3",{children:"Revenue"}),(0,s.jsxs)("p",{children:["$",j.toFixed(2)]})]})]}),(0,s.jsx)("div",{className:"filter-buttons",style:{marginBottom:"2rem"},children:["All","Pending","Confirmed","Completed","Cancelled"].map(e=>(0,s.jsx)("button",{className:"btn btn-outline filter-btn ".concat(t===e?"active":""),onClick:()=>i(e),children:e},e))}),(0,s.jsx)("div",{children:0===k.length?(0,s.jsx)("p",{style:{textAlign:"center",color:"#6b7280",padding:"2rem"},children:"No bookings found."}):k.map(e=>{var n,t;return(0,s.jsxs)("div",{className:"booking-card",style:{background:getStatusColor(e.status)},children:[(0,s.jsx)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},children:(0,s.jsxs)("div",{style:{flex:1},children:[(0,s.jsx)("h3",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:e.car_name}),(0,s.jsx)("p",{style:{color:"#6b7280",marginBottom:"0.5rem"},children:(null===(n=e.profiles)||void 0===n?void 0:n.full_name)||(null===(t=e.profiles)||void 0===t?void 0:t.email)}),(0,s.jsx)("span",{style:{background:"rgba(255,255,255,0.5)",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.875rem"},children:e.status})]})}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Check In"}),(0,s.jsx)("div",{style:{fontWeight:"600"},children:e.check_in})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Check Out"}),(0,s.jsx)("div",{style:{fontWeight:"600"},children:e.check_out})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Duration"}),(0,s.jsx)("div",{style:{fontWeight:"600"},children:e.duration})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{color:"#6b7280",fontSize:"0.875rem"},children:"Total"}),(0,s.jsx)("div",{style:{fontWeight:"600"},children:e.total})]})]}),"Pending"===e.status&&(0,s.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,s.jsx)("button",{className:"btn btn-primary",onClick:()=>updateBookingStatus(e.id,"Confirmed"),children:"Confirm"}),(0,s.jsx)("button",{className:"btn btn-outline",onClick:()=>updateBookingStatus(e.id,"Cancelled"),children:"Cancel"})]})]},e.id)})})]})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r(),{children:(0,s.jsx)("title",{children:"Admin - GO-RENT"})}),(0,s.jsx)(d.Z,{}),(0,s.jsx)("main",{children:(0,s.jsx)("div",{className:"container",style:{padding:"2rem 0",textAlign:"center"},children:(0,s.jsx)("p",{children:"Loading admin dashboard..."})})})]})}},4750:function(e,n,t){"use strict";t.d(n,{N:function(){return getSupabaseClient}});var s=t(2629);let i=null,getSupabaseClient=()=>{if(!i){let e="your_supabase_project_url_here",n="your_supabase_anon_key_here";e&&n&&(i=(0,s.eI)(e,n))}return i}}},function(e){e.O(0,[151,774,888,179],function(){return e(e.s=577)}),_N_E=e.O()}]);