(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[681],{2186:function(e,a,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bookings",function(){return s(1847)}])},7508:function(e,a,s){"use strict";var t=s(5893),r=s(5379),c=s.n(r),n=s(1664),i=s.n(n),l=s(7294),o=s(4750),d=s(1163);a.Z=()=>{let[e,a]=(0,l.useState)(null),[s,r]=(0,l.useState)(!1),n=(0,d.useRouter)();(0,l.useEffect)(()=>{let getSession=async()=>{var e;let{data:{session:s}}=await (0,o.N)().auth.getSession();a(null!==(e=null==s?void 0:s.user)&&void 0!==e?e:null)};getSession();let{data:{subscription:e}}=(0,o.N)().auth.onAuthStateChange((e,s)=>{var t;a(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null)});return()=>e.unsubscribe()},[]);let handleLogout=async()=>{await (0,o.N)().auth.signOut(),n.push("/")};return(0,t.jsxs)("header",{className:"jsx-411ff4dbbd43a9a7 navbar",children:[(0,t.jsxs)("div",{className:"jsx-411ff4dbbd43a9a7 container",children:[(0,t.jsx)(i(),{href:"/",className:"logo",children:"GO-RENT"}),(0,t.jsxs)("nav",{className:"jsx-411ff4dbbd43a9a7 nav-links",children:[(0,t.jsx)(i(),{href:"/browse",children:"Browse Cars"}),e&&(0,t.jsx)(i(),{href:"/bookings",children:"My Bookings"}),(null==e?void 0:e.email)==="admin@gorent.com"&&(0,t.jsx)(i(),{href:"/admin",children:"Admin"})]}),(0,t.jsx)("div",{className:"jsx-411ff4dbbd43a9a7 auth-buttons",children:e?(0,t.jsxs)("div",{className:"jsx-411ff4dbbd43a9a7 user-menu",children:[(0,t.jsx)("button",{onClick:()=>r(!s),className:"jsx-411ff4dbbd43a9a7 btn btn-outline user-btn",children:e.email}),s&&(0,t.jsx)("div",{className:"jsx-411ff4dbbd43a9a7 dropdown",children:(0,t.jsx)("button",{onClick:handleLogout,className:"jsx-411ff4dbbd43a9a7 logout-btn",children:"Logout"})})]}):(0,t.jsx)(i(),{href:"/login",className:"btn btn-outline",children:"Login / Sign in"})})]}),(0,t.jsx)(c(),{id:"411ff4dbbd43a9a7",children:".user-menu.jsx-411ff4dbbd43a9a7{position:relative}.user-btn.jsx-411ff4dbbd43a9a7{cursor:pointer}.dropdown.jsx-411ff4dbbd43a9a7{position:absolute;top:100%;right:0;background:white;border:1px solid#e5e7eb;-webkit-border-radius:.375rem;-moz-border-radius:.375rem;border-radius:.375rem;-webkit-box-shadow:0 10px 15px -3px rgba(0,0,0,.1);-moz-box-shadow:0 10px 15px -3px rgba(0,0,0,.1);box-shadow:0 10px 15px -3px rgba(0,0,0,.1);z-index:10;min-width:120px}.logout-btn.jsx-411ff4dbbd43a9a7{width:100%;padding:.5rem 1rem;background:none;border:none;text-align:left;cursor:pointer;color:#374151}.logout-btn.jsx-411ff4dbbd43a9a7:hover{background:#f9fafb}"})]})}},1847:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return Bookings}});var t=s(5893),r=s(5379),c=s.n(r),n=s(9008),i=s.n(n),l=s(1163),o=s(7294),d=s(4750),b=s(7508);function Bookings(){let e=(0,l.useRouter)(),[a,s]=(0,o.useState)([]),[r,n]=(0,o.useState)("All"),[x,f]=(0,o.useState)(0),[m,u]=(0,o.useState)(0),[j,h]=(0,o.useState)(0),[g,p]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let fetchBookings=async()=>{let{data:{user:a}}=await (0,d.N)().auth.getUser();if(!a){e.push("/login");return}let{data:t,error:r}=await (0,d.N)().from("bookings").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});if(r){console.error("Error fetching bookings:",r),p(!1);return}s(t||[]),updateStats(t||[]),p(!1)};fetchBookings()},[]);let updateStats=e=>{let a=e.filter(e=>["Pending","Confirmed"].includes(e.status)).length,s=e.filter(e=>"Completed"===e.status).length,t=e.reduce((e,a)=>e+parseFloat(a.total.replace("$","")),0);f(a),u(s),h(t)},cancelBooking=async e=>{let{error:t}=await (0,d.N)().from("bookings").update({status:"Cancelled"}).eq("id",e);if(t){console.error("Error cancelling booking:",t);return}let r=a.map(a=>a.id===e?{...a,status:"Cancelled"}:a);s(r),updateStats(r)},getStatusColor=e=>{switch(e){case"Pending":return"#fef3c7";case"Confirmed":return"#cffafe";case"Completed":case"Cancelled":return"#f3f4f6";default:return"#fce7f3"}},N="All"===r?a:a.filter(e=>e.status===r);return g?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i(),{children:(0,t.jsx)("title",{children:"My Bookings - GO-RENT"})}),(0,t.jsx)(b.Z,{}),(0,t.jsx)("main",{children:(0,t.jsx)("div",{className:"container",style:{padding:"2rem 0",textAlign:"center"},children:(0,t.jsx)("p",{children:"Loading bookings..."})})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i(),{children:(0,t.jsx)("title",{className:"jsx-a3ca4e8fb1602c",children:"My Bookings - GO-RENT"})}),(0,t.jsx)(b.Z,{}),(0,t.jsx)("main",{className:"jsx-a3ca4e8fb1602c",children:(0,t.jsxs)("div",{style:{padding:"2rem 0"},className:"jsx-a3ca4e8fb1602c container",children:[(0,t.jsx)("h1",{style:{fontSize:"2.25rem",fontWeight:"bold",marginBottom:"1rem"},className:"jsx-a3ca4e8fb1602c",children:"My Bookings"}),(0,t.jsx)("p",{style:{color:"#6b7280",marginBottom:"2rem"},className:"jsx-a3ca4e8fb1602c",children:"View and manage your luxury car reservations"}),(0,t.jsxs)("div",{className:"jsx-a3ca4e8fb1602c stats-grid",children:[(0,t.jsxs)("div",{className:"jsx-a3ca4e8fb1602c stat-card",children:[(0,t.jsx)("div",{className:"jsx-a3ca4e8fb1602c stat-label",children:"Active Bookings"}),(0,t.jsx)("div",{className:"jsx-a3ca4e8fb1602c stat-value",children:x})]}),(0,t.jsxs)("div",{className:"jsx-a3ca4e8fb1602c stat-card",children:[(0,t.jsx)("div",{className:"jsx-a3ca4e8fb1602c stat-label",children:"Completed"}),(0,t.jsx)("div",{className:"jsx-a3ca4e8fb1602c stat-value",children:m})]}),(0,t.jsxs)("div",{className:"jsx-a3ca4e8fb1602c stat-card",children:[(0,t.jsx)("div",{className:"jsx-a3ca4e8fb1602c stat-label",children:"Total Spent"}),(0,t.jsxs)("div",{className:"jsx-a3ca4e8fb1602c stat-value",children:["$",j.toFixed(2)]})]})]}),(0,t.jsx)("div",{className:"jsx-a3ca4e8fb1602c filter-buttons",children:["All","Pending","Confirmed","Completed","Cancelled"].map(e=>(0,t.jsx)("button",{onClick:()=>n(e),className:"jsx-a3ca4e8fb1602c "+"btn btn-outline filter-btn ".concat(r===e?"active":""),children:e},e))}),(0,t.jsx)("div",{className:"jsx-a3ca4e8fb1602c",children:0===N.length?(0,t.jsx)("p",{style:{textAlign:"center",color:"#6b7280",padding:"2rem"},className:"jsx-a3ca4e8fb1602c",children:"No bookings found."}):N.map(e=>(0,t.jsxs)("div",{style:{background:getStatusColor(e.status)},className:"jsx-a3ca4e8fb1602c booking-card",children:[(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem"},className:"jsx-a3ca4e8fb1602c",children:[(0,t.jsx)("div",{style:{width:"80px",height:"80px",background:"#e5e7eb",borderRadius:"0.5rem",display:"flex",alignItems:"center",justifyContent:"center"},className:"jsx-a3ca4e8fb1602c",children:(0,t.jsx)("span",{style:{color:"#6b7280"},className:"jsx-a3ca4e8fb1602c",children:"Image"})}),(0,t.jsxs)("div",{style:{flex:1},className:"jsx-a3ca4e8fb1602c",children:[(0,t.jsx)("h3",{style:{fontWeight:"600",marginBottom:"0.5rem"},className:"jsx-a3ca4e8fb1602c",children:e.car_name}),(0,t.jsx)("span",{style:{background:"rgba(255,255,255,0.5)",padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.875rem"},className:"jsx-a3ca4e8fb1602c",children:e.status})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem",marginBottom:"1rem"},className:"jsx-a3ca4e8fb1602c",children:[(0,t.jsxs)("div",{className:"jsx-a3ca4e8fb1602c",children:[(0,t.jsx)("div",{style:{color:"#6b7280",fontSize:"0.875rem"},className:"jsx-a3ca4e8fb1602c",children:"Check In"}),(0,t.jsx)("div",{style:{fontWeight:"600"},className:"jsx-a3ca4e8fb1602c",children:e.check_in})]}),(0,t.jsxs)("div",{className:"jsx-a3ca4e8fb1602c",children:[(0,t.jsx)("div",{style:{color:"#6b7280",fontSize:"0.875rem"},className:"jsx-a3ca4e8fb1602c",children:"Check Out"}),(0,t.jsx)("div",{style:{fontWeight:"600"},className:"jsx-a3ca4e8fb1602c",children:e.check_out})]}),(0,t.jsxs)("div",{className:"jsx-a3ca4e8fb1602c",children:[(0,t.jsx)("div",{style:{color:"#6b7280",fontSize:"0.875rem"},className:"jsx-a3ca4e8fb1602c",children:"Duration"}),(0,t.jsx)("div",{style:{fontWeight:"600"},className:"jsx-a3ca4e8fb1602c",children:e.duration})]}),(0,t.jsxs)("div",{className:"jsx-a3ca4e8fb1602c",children:[(0,t.jsx)("div",{style:{color:"#6b7280",fontSize:"0.875rem"},className:"jsx-a3ca4e8fb1602c",children:"Price per Day"}),(0,t.jsx)("div",{style:{fontWeight:"600"},className:"jsx-a3ca4e8fb1602c",children:e.price})]})]}),(0,t.jsxs)("div",{style:{borderTop:"1px solid rgba(255,255,255,0.2)",paddingTop:"1rem",marginBottom:"1rem"},className:"jsx-a3ca4e8fb1602c",children:[(0,t.jsxs)("div",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.5rem"},className:"jsx-a3ca4e8fb1602c",children:["Currently in progress - Return by ",e.check_out]}),(0,t.jsxs)("div",{style:{fontSize:"1.125rem",fontWeight:"600"},className:"jsx-a3ca4e8fb1602c",children:["Total Price: ",e.total]})]}),"Pending"===e.status&&(0,t.jsx)("button",{style:{background:"#dc2626",color:"white"},onClick:()=>cancelBooking(e.id),className:"jsx-a3ca4e8fb1602c btn",children:"Cancel Booking"})]},e.id))})]})}),(0,t.jsx)(c(),{id:"a3ca4e8fb1602c",children:".stats-grid.jsx-a3ca4e8fb1602c{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:2rem}.stat-card.jsx-a3ca4e8fb1602c{background:rgba(37,99,235,.1);-webkit-border-radius:.75rem;-moz-border-radius:.75rem;border-radius:.75rem;padding:1.5rem;text-align:center}.stat-label.jsx-a3ca4e8fb1602c{color:#6b7280;font-size:.875rem}.stat-value.jsx-a3ca4e8fb1602c{font-size:2rem;font-weight:bold;color:#2563eb}.filter-buttons.jsx-a3ca4e8fb1602c{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:.5rem;margin-bottom:2rem}.filter-btn.active.jsx-a3ca4e8fb1602c{background-color:#2563eb;color:white}.booking-card.jsx-a3ca4e8fb1602c{border:1px solid#e5e7eb;-webkit-border-radius:.75rem;-moz-border-radius:.75rem;border-radius:.75rem;padding:1.5rem;margin-bottom:1rem}"})]})}},4750:function(e,a,s){"use strict";s.d(a,{N:function(){return getSupabaseClient}});var t=s(2629);let r=null,getSupabaseClient=()=>{if(!r){let e="your_supabase_project_url_here",a="your_supabase_anon_key_here";e&&a&&(r=(0,t.eI)(e,a))}return r}}},function(e){e.O(0,[151,774,888,179],function(){return e(e.s=2186)}),_N_E=e.O()}]);